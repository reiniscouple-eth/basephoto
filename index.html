<!DOCTYPE html>
<html>
<head>
    <title>YOU by Reiniscouple</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.11.1/p5.js"></script>
    <meta charset="utf-8" />
    <style>
      html, body {
        margin: 0;
        padding: 0;
      }
      canvas {
        display: block;
      }
    </style>
    <script>
      let video;
      let logoImage;
      const FONT_SIZE = 16; // Tamanho do logotipo (em pixels).
      const ASPECT_RATIO = 2; // Proporção aproximada de largura/altura de um caractere.

      function preload() {
        // Carregar o logotipo antes de iniciar
        logoImage = loadImage('https://i.imgur.com/UBMTydI.png'); // Substitua pelo URL do logotipo
      }

      function setup() {
        createCanvas(windowWidth, windowHeight); // Criar canvas de tela cheia.
        video = createCapture(VIDEO); // Capturar vídeo.
        video.size(floor(width / FONT_SIZE), floor(height / FONT_SIZE)); // Ajustar resolução do vídeo para combinar com a grade.
        video.hide(); // Esconder o elemento de vídeo.
        noLoop(); // Evitar que o draw seja executado automaticamente.
      }

      function draw() {
        background(0); // Fundo preto.
        video.loadPixels(); // Carregar os pixels do vídeo.

        // Percorrer os pixels e desenhar o logotipo correspondente
        for (let y = 0; y < video.height; y++) {
          for (let x = 0; x < video.width; x++) {
            const index = (x + y * video.width) * 4;
            const r = video.pixels[index + 0]; // Vermelho.
            const g = video.pixels[index + 1]; // Verde.
            const b = video.pixels[index + 2]; // Azul.
            const avg = (r + g + b) / 3; // Média do brilho.

            // Mapeamento da tonalidade para opacidade
            const opacity = map(avg, 0, 255, 0.2, 1); // Tonalidade mais escura -> mais opaca.

            // Ajustar posição e tamanho do logotipo
            push();
            translate(x * FONT_SIZE, y * FONT_SIZE); // Posição do logotipo.
            tint(255, opacity * 255); // Ajustar a opacidade do logotipo.
            image(logoImage, 0, 0, FONT_SIZE, FONT_SIZE); // Desenhar o logotipo.
            pop();
          }
        }
      }

      function mousePressed() {
        redraw(); // Redesenhar apenas quando o mouse for pressionado.
      }
    </script>
</head>
<body>
</body>
</html>
