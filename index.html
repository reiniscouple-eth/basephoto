<!DOCTYPE html>
<html>
<head>
    <title>YOU by Reiniscouple</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.11.1/p5.js"></script>
    <meta charset="utf-8" />
    <style>
      html, body {
        margin: 0;
        padding: 0;
        background: #000;
        overflow: hidden;
      }
      canvas {
        display: block;
      }
    </style>
    <script>
      let video;
      let logoImage;
      const LOGO_SIZE = 16; // Tamanho do logotipo em pixels.

      function preload() {
        // Carregar o logotipo antes de iniciar
        logoImage = loadImage('https://i.imgur.com/UBMTydI.png'); // Substitua pelo URL do logotipo
      }

      function setup() {
        createCanvas(windowWidth, windowHeight); // Criar canvas de tela cheia.
        video = createCapture(VIDEO); // Capturar vídeo.
        video.size(floor(width / LOGO_SIZE), floor(height / LOGO_SIZE)); // Ajustar resolução do vídeo para combinar com a grade.
        video.hide(); // Esconder o elemento de vídeo.
        noLoop(); // Desenhar manualmente (somente quando `draw` for chamado explicitamente).
      }

      function draw() {
        background(0); // Fundo preto.
        video.loadPixels(); // Carregar os pixels do vídeo.

        if (video.pixels.length > 0) { // Verificar se os pixels do vídeo estão carregados.
          for (let y = 0; y < video.height; y++) {
            for (let x = 0; x < video.width; x++) {
              const index = (x + y * video.width) * 4;
              const r = video.pixels[index + 0]; // Vermelho.
              const g = video.pixels[index + 1]; // Verde.
              const b = video.pixels[index + 2]; // Azul.
              const avg = (r + g + b) / 3; // Média do brilho.

              // Ajustar a opacidade do logotipo com base na tonalidade
              push();
              const brightness = map(avg, 0, 255, 0.2, 1); // Mapear brilho para opacidade.
              tint(255, brightness * 255); // Ajustar a opacidade do logotipo.
              image(logoImage, x * LOGO_SIZE, y * LOGO_SIZE, LOGO_SIZE, LOGO_SIZE); // Renderizar o logotipo.
              pop();
            }
          }
        }
      }

      function mousePressed() {
        redraw(); // Atualizar a tela ao clicar com o mouse.
      }
    </script>
</head>
<body>
</body>
</html>
